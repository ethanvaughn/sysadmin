/* jQuery jMobi Plugin - rev46
 * by Trevor Norris - Copyright (c) 2010
 * Generic mobile plugin
 * Autodetect what mobile browser is being used and automatically apply the specific declarations.
 * Build the page normally, using key id's and classes that jMobi can identify. When it parses the
 *  page, those will be used to make the page work with the specific detected browser.
 * In the initial declaration, include needed options for each supported browser. */
(function($){var jMobi=function(options){jMobi.glbs=$.extend(true,{},defaults,options||{});var opts=jMobi.glbs,mDev=navigator.userAgent||navigator.vendor||window.opera;if(/ip(hone|od)/i.test(mDev)){mSafari();return;}else{if(/android/i.test(mDev)){mAndriod();return;}else{mGeneric();};};},defaults={monitorChange:false,visClass:'amAlive',generic:{style:''},mSafari:{fullScreen:false,iconGloss:true,iconPath:false,imgList:false,imgPreload:false,orient:true,splashScreen:false,statusBar:'default',style:'',viewport:true},mAndriod:{fullScreen:false,imgList:false,imgPreload:false,style:'',viewport:true},mIE:{style:''},mOpera:{style:''}};jMobi.glbs={};function mGeneric(){var opts=jMobi.glbs;$.jsCom.style({path:opts.generic.style});$([jCt('meta',{'name':'HandheldFriendly','content':'true'}),jCt('meta',{'name':'MobileOptimized','content':screen.width}),jCt('meta',{'name':'viewport','content':'width='+screen.width})]).appendTo('head:eq(0)');$('.link').live('click',function(e){e.preventDefault();$('.'+opts.visClass).removeClass(opts.visClass);$($(this).attr('href')).addClass(opts.visClass);});};function mSafari(){var opts=jMobi.glbs,hOptions=new Array();$.jsCom.style({path:opts.mSafari.style});if(opts.mSafari.iconPath){var iG=opts.mSafari.iconGloss?'':'-precomposed';if($('#iconPath-mobi').length===0){hOptions.push(jCt('link',{'rel':'apple-touch-icon'+iG,'href':opts.mSafari.iconPath,'id':'iconPath-mobi'}));}else{$('#iconPath-mobi').attr({'rel':'apple-touch-icon'+iG,'href':opts.mSafari.iconPath});};};if(opts.mSafari.splashScreen){if($('#splashScreen-mobi').length===0){hOptions.push(jCt('link',{'rel':'apple-touch-startup-image','href':opts.mSafari.splashScreen,'id':'splashScreen-mobi'}));}else{$('#splashScreen-mobi').attr({'rel':'apple-touch-startup-image','href':opts.mSafari.splashScreen});};};if(opts.mSafari.viewport){if($('#viewport-mobi').length===0){hOptions.push(jCt('meta',{'name':'viewport','content':'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;','id':'viewport-mobi'}));};};if(opts.mSafari.fullScreen){if($('#fullScreen-mobi').length===0){hOptions.push(jCt('meta',{'name':'apple-mobile-web-app-capable','content':'yes','id':'fullScreen-mobi'}));if(opts.mSafari.statusBar){hOptions.push(jCt('meta',{'name':'apple-mobile-web-app-status-bar-style','content':opts.mSafari.statusBar,'id':'statusBar-mobi'}));};}else{$('#fullScreen-mobi').attr({'name':'apple-mobile-web-app-capable','content':'yes'});if($('#statusBar-mobi').length!==0&&opts.mSafari.statusBar){$('#statusBar-mobi').attr({'name':'apple-mobile-web-app-status-bar-style','content':opts.mSafari.statusBar});};};};if(hOptions.length!==0){$(hOptions).appendTo('head:eq(0)');};if($.isArray(opts.imgList)&&opts.imgPreload){for(var key in opts.imgList){(new Image()).src=opts.imgList[key];};};$('.link').live('click',function(e){e.preventDefault();$('.'+opts.visClass).removeClass(opts.visClass);$($(this).attr('href')).addClass(opts.visClass);});};function mAndriod(){var opts=jMobi.glbs,hOptions=new Array();$.jsCom.style({path:opts.mAndriod.style});if(opts.mSafari.viewport){if($('#viewport-mobi').length===0){hOptions.push(jCt('meta',{'name':'viewport','content':'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;','id':'viewport-mobi'}));};};if(opts.mSafari.fullScreen){if($('#fullScreen-mobi').length===0){hOptions.push(jCt('meta',{'name':'apple-mobile-web-app-capable','content':'yes','id':'fullScreen-mobi'}));if(opts.mSafari.statusBar){hOptions.push(jCt('meta',{'name':'apple-mobile-web-app-status-bar-style','content':opts.mSafari.statusBar,'id':'statusBar-mobi'}));};}else{$('#fullScreen-mobi').attr({'name':'apple-mobile-web-app-capable','content':'yes'});if($('#statusBar-mobi').length!==0&&opts.mSafari.statusBar){$('#statusBar-mobi').attr({'name':'apple-mobile-web-app-status-bar-style','content':opts.mSafari.statusBar});};};};if(hOptions.length!==0){$(hOptions).appendTo('head:eq(0)');};if($.isArray(opts.imgList)&&opts.imgPreload){for(var key in opts.imgList){(new Image()).src=opts.imgList[key];};};$('.link').live('click',function(e){e.preventDefault();$('.'+opts.visClass).removeClass(opts.visClass);$($(this).attr('href')).addClass(opts.visClass);});};$.jMobi=jMobi;})(jQuery);